# ============================================
# 生产环境配置
# ============================================
# 此配置文件针对生产环境优化，启用所有核心功能
# 使用方法：cp .env.production .env

# ============================================
# Spring Boot 认证服务配置
# ============================================
SPRING_BOOT_URL=http://localhost:3000

# ============================================
# 意图分类器配置（✅ 已启用）
# ============================================
ENABLE_INTENT_CLASSIFIER=true
INTENT_CLASSIFIER_LLM_ID=qwen3-32b
INTENT_CLASSIFIER_TIMEOUT=5

# ============================================
# 子问题分解配置（✅ 已启用）
# ============================================
ENABLE_SUBQUESTION_DECOMPOSITION=true

# 分解参数
SUBQUESTION_MAX_DEPTH=3
SUBQUESTION_MIN_SCORE=0.3
SUBQUESTION_COMPLEXITY_THRESHOLD=60
SUBQUESTION_DECOMP_LLM_ID=qwen3-32b
SUBQUESTION_DECOMP_TIMEOUT=10
SUBQUESTION_SYNTHESIS_TIMEOUT=30

# 实体检测
SUBQUESTION_ENABLE_ENTITY_CHECK=true
SUBQUESTION_MIN_ENTITIES=2

# 对话历史压缩（多轮场景）
SUBQUESTION_HISTORY_COMPRESS_TURNS=5
SUBQUESTION_HISTORY_MAX_TOKENS=500

# 健康度指标
SUBQUESTION_MAX_EMPTY_RESULTS=2
SUBQUESTION_FALLBACK_ON_ERROR=true

# ============================================
# RRF 融合权重配置
# ============================================
RRF_K=10.0
RRF_VECTOR_WEIGHT=0.7
RRF_BM25_WEIGHT=0.3

# ============================================
# RAG 核心参数（生产环境优化）
# ============================================
RETRIEVAL_TOP_K=50
RETRIEVAL_TOP_K_BM25=10
RERANK_TOP_N=20
RERANKER_INPUT_TOP_N=30
RETRIEVAL_SCORE_THRESHOLD=0.2
RERANK_SCORE_THRESHOLD=0.3

# ============================================
# 免签知识库配置
# ============================================
VISA_FREE_RETRIEVAL_COUNT=5
GENERAL_RETRIEVAL_COUNT=5

# ============================================
# LLM 行为参数
# ============================================
LLM_REQUEST_TIMEOUT=1800.0
LLM_CONTEXT_WINDOW=32768
LLM_MAX_TOKENS=8192
LLM_MAX_RETRIES=2
TEMPERATURE_DISASSEMBLY=0.0
TEMPERATURE_ANALYSIS_ON=0.5

# ============================================
# 设备配置（✅ NPU加速）
# ============================================
DEVICE=npu

# ============================================
# Qdrant 配置
# ============================================
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION=travel_kb

# ============================================
# 规则知识库配置（可选）
# ============================================
# ENABLE_RULES_FEATURE=true
# RULES_FIXED_INJECT_COUNT=3

# ============================================
# 其他功能开关
# ============================================
# NPU_AVAILABLE=true
